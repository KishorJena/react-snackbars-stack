{"version":3,"file":"react-snackbars-stack.cjs.development.js","sources":["../src/constants/constants.ts","../src/context/SnackbarContext.tsx","../src/event/eventEmitter.ts","../src/reducers/snackbarReducer.ts","../src/theme/theme.tsx","../src/snackbar/SnackbarProvider.tsx","../src/snackbar/enqueueSnackbar.ts","../src/hooks/useSnackbar.tsx"],"sourcesContent":["import { DirectionTypes, Severity } from '../types';\r\n\r\nexport const SnackbarDefaults = {\r\n  anchorOrigin: {\r\n    vertical: 'bottom',\r\n    horizontal: 'left',\r\n  },\r\n  maxSnackbars: 4,\r\n  theme: 'light',\r\n  transitionType: 'slide',\r\n} as const;\r\n\r\nexport const OPPOSITE_DIRECTIONS: Record<DirectionTypes, DirectionTypes> = {\r\n  left: 'right',\r\n  right: 'left',\r\n  up: 'down',\r\n  down: 'up',\r\n} as const;\r\n\r\nexport const DEFAULT_OPTIONS = {\r\n  severity: 'info' as Severity,\r\n  duration: 3000,\r\n  preventDuplicate: false,\r\n} as const;\r\n","import { createContext } from 'react';\r\nimport { SnackbarContextType } from '../types';\r\n\r\nexport const SnackbarContext = createContext<SnackbarContextType | undefined>(\r\n  undefined\r\n);\r\n","import { SnackbarPayload } from '../types';\r\n\r\nclass EventEmitter {\r\n  private listeners = new Set<(snackbar: SnackbarPayload) => void>();\r\n  private active = false;\r\n  private queue: SnackbarPayload[] = [];\r\n  private processing = false;\r\n  private activeMessages = new Set<string>();\r\n\r\n  async emit(snackbar: SnackbarPayload): Promise<void> {\r\n    if (!this.active) return;\r\n\r\n    if (\r\n      snackbar.preventDuplicate &&\r\n      this.activeMessages.has(snackbar.message)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this.queue.push(snackbar);\r\n    if (snackbar.preventDuplicate) {\r\n      this.activeMessages.add(snackbar.message);\r\n    }\r\n\r\n    if (!this.processing) {\r\n      this.processing = true;\r\n      while (this.queue.length > 0) {\r\n        const next = this.queue.shift();\r\n        if (next) {\r\n          this.listeners.forEach(listener => listener(next));\r\n          await new Promise(resolve => setTimeout(resolve, 100));\r\n        }\r\n      }\r\n      this.processing = false;\r\n    }\r\n  }\r\n\r\n  subscribe(listener: (snackbar: SnackbarPayload) => void): () => void {\r\n    this.listeners.add(listener);\r\n    return () => {\r\n      this.listeners.delete(listener);\r\n      this.queue = [];\r\n      this.activeMessages.clear();\r\n    };\r\n  }\r\n\r\n  setActive(value: boolean): void {\r\n    this.active = value;\r\n  }\r\n\r\n  // Add this to snackbarReducer.ts\r\n  removeFromActiveMessages(message: string): void {\r\n    this.activeMessages.delete(message);\r\n  }\r\n}\r\n\r\nexport const eventEmitter = new EventEmitter();\r\n","import { SnackbarAction, SnackbarPayload } from '../types';\r\nimport { eventEmitter } from '../event';\r\n\r\nexport const snackbarReducer = (\r\n  state: SnackbarPayload[],\r\n  action: SnackbarAction,\r\n  maxSnackbars: number\r\n): SnackbarPayload[] => {\r\n  switch (action.type) {\r\n    case 'ADD_SNACKBAR':\r\n      return [...state, action.payload].slice(-maxSnackbars);\r\n    // return [...state, action.payload];\r\n    case 'CLOSE_SNACKBAR':\r\n      return state.map(snackbar => {\r\n        if (snackbar.id === action.payload) {\r\n          eventEmitter.removeFromActiveMessages(snackbar.message);\r\n          return { ...snackbar, open: false };\r\n        }\r\n        return snackbar;\r\n      });\r\n    case 'REMOVE_SNACKBAR':\r\n      return state.filter(snackbar => snackbar.id !== action.payload);\r\n    case 'CLEAR_ALL':\r\n      state.forEach(snackbar => {\r\n        eventEmitter.removeFromActiveMessages(snackbar.message);\r\n      });\r\n      return [];\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { createTheme } from '@mui/material';\r\n\r\nexport const darkTheme = createTheme({\r\n  palette: {\r\n    mode: 'dark',\r\n  },\r\n});\r\n\r\nexport const lightTheme = createTheme({\r\n  palette: {\r\n    mode: 'light',\r\n  },\r\n});\r\n","import {\r\n  Alert,\r\n  Fade,\r\n  Grow,\r\n  Portal,\r\n  Slide,\r\n  ThemeProvider,\r\n  Zoom,\r\n} from '@mui/material';\r\nimport Snackbar from '@mui/material/Snackbar';\r\nimport { TransitionProps } from '@mui/material/transitions';\r\nimport React, {\r\n  memo,\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useReducer,\r\n  useRef,\r\n} from 'react';\r\nimport { DEFAULT_OPTIONS, SnackbarDefaults } from '../constants';\r\nimport { SnackbarContext } from '../context';\r\nimport { eventEmitter } from '../event';\r\nimport { snackbarReducer } from '../reducers';\r\nimport { darkTheme, lightTheme } from '../theme';\r\nimport {\r\n  AnchorOrigin,\r\n  DirectionTypes,\r\n  EnqueueSnackbar,\r\n  SnackbarAction,\r\n  SnackbarPayload,\r\n  SnackbarProviderProps,\r\n  TransitionType,\r\n} from '../types';\r\n\r\nconst oppositeDirections: { [key in DirectionTypes]: DirectionTypes } = {\r\n  left: 'right',\r\n  right: 'left',\r\n  up: 'down',\r\n  down: 'up',\r\n};\r\n\r\nconst SNACKBAR_SPACING = 60;\r\n\r\nconst transitionComponents = (\r\n  transitionType: TransitionType,\r\n  anchorOrigin: AnchorOrigin\r\n): React.ComponentType<any> => {\r\n  switch (transitionType) {\r\n    case 'slide':\r\n      return (props: TransitionProps & { children: React.ReactElement }) => (\r\n        <Slide\r\n          {...props}\r\n          direction={oppositeDirections[anchorOrigin.horizontal]}\r\n        />\r\n      );\r\n    case 'grow':\r\n      return Grow;\r\n    case 'fade':\r\n      return Fade;\r\n    case 'zoom':\r\n      return Zoom;\r\n    default:\r\n      return Slide;\r\n  }\r\n};\r\n\r\n// Main component\r\nconst Provider: React.FC<SnackbarProviderProps> = ({\r\n  anchorOrigin = SnackbarDefaults.anchorOrigin,\r\n  maxSnackbars = SnackbarDefaults.maxSnackbars,\r\n  theme = SnackbarDefaults.theme,\r\n  transitionType = SnackbarDefaults.transitionType,\r\n  icon,\r\n  children,\r\n}) => {\r\n  const [snackbars, dispatch] = useReducer(\r\n    (state: SnackbarPayload[], action: SnackbarAction) =>\r\n      snackbarReducer(state, action, maxSnackbars),\r\n    []\r\n  );\r\n\r\n  const instanceId = useRef(Date.now());\r\n\r\n  useEffect(() => {\r\n    // Check for multiple instances\r\n    const providers = document.querySelectorAll('[data-snackbar-provider]');\r\n    if (providers.length > 1) {\r\n      console.warn('Multiple SnackbarProvider instances detected!');\r\n    }\r\n\r\n    // Setup event listener\r\n    eventEmitter.setActive(true);\r\n    const unsubscribe = eventEmitter.subscribe(newSnackbar => {\r\n      dispatch({ type: 'ADD_SNACKBAR', payload: newSnackbar });\r\n    });\r\n\r\n    return () => {\r\n      eventEmitter.setActive(false);\r\n      unsubscribe();\r\n      dispatch({ type: 'CLEAR_ALL' });\r\n    };\r\n  }, []);\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  const handleClose = useCallback(\r\n    (id: number) => (\r\n      _event?: React.SyntheticEvent | Event,\r\n      reason?: string\r\n    ) => {\r\n      if (reason === 'clickaway') return;\r\n\r\n      dispatch({ type: 'CLOSE_SNACKBAR', payload: id });\r\n\r\n      setTimeout(() => {\r\n        dispatch({ type: 'REMOVE_SNACKBAR', payload: id });\r\n      }, 150);\r\n    },\r\n    []\r\n  );\r\n\r\n  const SnakbarTransition = useMemo(\r\n    () => transitionComponents(transitionType, anchorOrigin),\r\n    [transitionType, anchorOrigin]\r\n  );\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  const enqueueSnackbar: EnqueueSnackbar = useCallback(\r\n    (message, options = DEFAULT_OPTIONS) => {\r\n      const id = Date.now();\r\n      const payload: SnackbarPayload = {\r\n        id: id,\r\n        open: true,\r\n        message,\r\n        severity: options.severity,\r\n        duration: options.duration,\r\n        preventDuplicate: options.preventDuplicate,\r\n      };\r\n\r\n      if (maxSnackbars === snackbars.length) {\r\n        handleClose(snackbars[0].id)();\r\n      }\r\n\r\n      dispatch({ type: 'ADD_SNACKBAR', payload });\r\n    },\r\n    [maxSnackbars, snackbars, handleClose]\r\n  );\r\n\r\n  return (\r\n    <SnackbarContext.Provider value={{ enqueueSnackbar }}>\r\n      <ThemeProvider theme={theme === 'dark' ? darkTheme : lightTheme}>\r\n        <Portal>\r\n          <div\r\n            data-snackbar-provider={instanceId.current}\r\n            style={{\r\n              position: 'fixed',\r\n              [anchorOrigin.vertical]: 0,\r\n              [anchorOrigin.horizontal]: 0,\r\n              zIndex: 9999,\r\n              pointerEvents: 'none',\r\n            }}\r\n          >\r\n            {snackbars.map((snackbar, index) => (\r\n              <Snackbar\r\n                key={snackbar.id}\r\n                open={snackbar.open}\r\n                TransitionComponent={SnakbarTransition}\r\n                autoHideDuration={snackbar.duration}\r\n                onClose={handleClose(snackbar.id)}\r\n                anchorOrigin={anchorOrigin}\r\n                sx={{\r\n                  '& .MuiSnackbar-root': {\r\n                    position: 'static',\r\n                  },\r\n                  pointerEvents: 'auto',\r\n                  transition: 'all 0.1s ease-in-out',\r\n                  [anchorOrigin.vertical]: `${index * SNACKBAR_SPACING +\r\n                    24}px !important`,\r\n                }}\r\n              >\r\n                <Alert\r\n                  variant=\"filled\"\r\n                  onClose={handleClose(snackbar.id)}\r\n                  severity={snackbar.severity}\r\n                  sx={{\r\n                    width: '100%',\r\n                  }}\r\n                  icon={icon === true ? undefined : icon}\r\n                >\r\n                  {snackbar.message}\r\n                </Alert>\r\n              </Snackbar>\r\n            ))}\r\n          </div>\r\n        </Portal>\r\n      </ThemeProvider>\r\n\r\n      {children}\r\n    </SnackbarContext.Provider>\r\n  );\r\n};\r\n\r\nexport const SnackbarProvider: React.FC<SnackbarProviderProps> = memo(Provider);\r\n","import { DEFAULT_OPTIONS } from '../constants';\r\nimport { eventEmitter } from '../event';\r\nimport { EnqueueSnackbar, SnackbarPayload } from '../types';\r\n\r\n// Helper function to enqueue snackbars\r\nexport const enqueueSnackbar: EnqueueSnackbar = (\r\n  message,\r\n  options = DEFAULT_OPTIONS\r\n) => {\r\n  const snackbarEventEmit: SnackbarPayload = {\r\n    id: Date.now(),\r\n    open: true,\r\n    message,\r\n    severity: options.severity,\r\n    duration: options.duration,\r\n    preventDuplicate: options.preventDuplicate,\r\n  };\r\n\r\n  eventEmitter.emit(snackbarEventEmit);\r\n};\r\n","import { useContext } from 'react';\r\nimport { SnackbarContext } from '../context/SnackbarContext';\r\n\r\nexport const useSnackbar = () => {\r\n  const context = useContext(SnackbarContext);\r\n  if (!context) {\r\n    throw new Error('useSnackbar must be used within a SnackbarProvider');\r\n  }\r\n  return context;\r\n};\r\n"],"names":["SnackbarDefaults","anchorOrigin","vertical","horizontal","maxSnackbars","theme","transitionType","OPPOSITE_DIRECTIONS","left","right","up","down","DEFAULT_OPTIONS","severity","duration","preventDuplicate","SnackbarContext","createContext","undefined","EventEmitter","Set","_proto","prototype","emit","_emit","_asyncToGenerator","_regeneratorRuntime","mark","_callee","snackbar","_this","_loop","wrap","_callee$","_context2","prev","next","active","abrupt","activeMessages","has","message","queue","push","add","processing","_loop$","_context","shift","listeners","forEach","listener","Promise","resolve","setTimeout","stop","length","delegateYield","_x","apply","arguments","subscribe","_this2","clear","setActive","value","removeFromActiveMessages","eventEmitter","snackbarReducer","state","action","type","concat","payload","slice","map","id","_extends","open","filter","darkTheme","createTheme","palette","mode","lightTheme","oppositeDirections","SNACKBAR_SPACING","transitionComponents","props","React","Slide","direction","Grow","Fade","Zoom","Provider","_ref","_ref$anchorOrigin","_ref$maxSnackbars","_ref$theme","_ref$transitionType","icon","children","_useReducer","useReducer","snackbars","dispatch","instanceId","useRef","Date","now","useEffect","providers","document","querySelectorAll","console","warn","unsubscribe","newSnackbar","handleClose","useCallback","_event","reason","SnakbarTransition","useMemo","enqueueSnackbar","options","ThemeProvider","Portal","current","style","_style","position","zIndex","pointerEvents","index","_sx","Snackbar","key","TransitionComponent","autoHideDuration","onClose","sx","transition","Alert","variant","width","SnackbarProvider","memo","snackbarEventEmit","useSnackbar","context","useContext","Error"],"mappings":"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"}